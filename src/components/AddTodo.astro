---
const { todoList } = Astro.props;
---

<div class="add-todo">
  <h4>Add your task</h4>
  <input class="todo-input" type="text" name="task" />
  <button class="add-task-button">Add Task</button>
</div>

<script>
  interface InputValue extends HTMLInputElement {
    value: string;
  }

  const addTaskButton = document.querySelector("button.add-task-button");
  const todoInput: InputValue | null =
    document.querySelector("input.todo-input");

  // // Handle clicks on each button.
  addTaskButton?.addEventListener("click", () => {
    const inputCheckbox = document.createElement("input");
    inputCheckbox.setAttribute("type", "checkbox");

    const spanTaskName = document.createElement("span");
    spanTaskName.textContent = todoInput?.value || "";

    const taskContent = document.createElement("div");
    taskContent.classList.add("task-content");
    taskContent.classList.add("astro-AUGVP7MQ");
    taskContent.appendChild(inputCheckbox);
    taskContent.appendChild(spanTaskName);

    const iconSVG = document.querySelector("svg.task-icon");
    const clonedIconSVG =
      iconSVG?.cloneNode(true) || document.createElement("div");

    const divTask = document.createElement("div");
    divTask.classList.add("task");
    divTask.classList.add("astro-AUGVP7MQ");
    divTask.appendChild(taskContent);
    divTask.appendChild(clonedIconSVG);

    const todoListDiv = document.querySelector("div.todo-list");
    todoListDiv?.appendChild(divTask);

    todoInput!.value = "";
    todoInput?.focus();
  });
</script>

<style lang="scss">
  .add-todo {
    align-items: center;
    background-color: #423a6f;
    border-radius: 0.25rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 10px;
    width: 500px;

    h4 {
      color: #fff;
      margin: 0;
      padding-bottom: 10px;
    }

    .todo-input {
      appearance: none;
      background-clip: padding-box;
      background-color: rgba(0, 0, 0, 0.2);
      border-radius: 0.25rem;
      border: none;
      color: #fff;
      font-size: 1rem;
      font-weight: 400;
      line-height: 1.5;
      margin-bottom: 10px;
      padding: 0.375rem 0.75rem;
      transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
      width: 90%;
    }

    .todo-input:focus {
      box-shadow: 0 0 0 0.15rem #fff;
      outline: 0;
    }

    .add-task-button {
      border-radius: 0.25rem;
      border: none;
      color: #352f5b;
      cursor: pointer;
      font-weight: 700;
      padding: 10px 20px;
    }
  }
</style>
